/*
 * arducam_methods.c
 *
 *  Created on: Dec 15, 2021
 *      Author: Liam Droog
 */
#include "arducam_methods.h"
#include "main.h"

void SPI2_write_reg(uint8_t addr, uint8_t data)
{
	 bus_write(addr | 0x80, data);
}

uint8_t SPI2_read_reg(uint8_t addr)
{
	uint8_t data;
	data = bus_read(addr & 0x7F);
	return data;
}

uint8_t bus_read(int address)
{
	uint8_t value;
	CS_LOW();
	SPI2_ReadWriteByte(address);
	value = SPI2_ReadWriteByte(0x00);
	CS_HIGH();
	return value;
}

uint8_t bus_write(int address,int value)
{
	CS_LOW();
	delay_us(10);
	SPI2_ReadWriteByte(address);
	SPI2_ReadWriteByte(value);
	delay_us(10);
	CS_HIGH();
	return 1;
}
